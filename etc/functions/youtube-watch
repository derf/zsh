## vim:ft=zsh
## Watch a youtube video
## requires youtube-dl and mplayer
## Usage: youtube-dl [-c] <video url> [mplayer options]
typeset video
typeset -i cache=0

while [[ $* == -* ]] {
	case $1 in
		-c) cache=1 ;;
		-|--) shift; break ;;
	esac
	shift
}

video=$1
shift

if ((cache)) {
	youtube-dl -o /tmp/youtube.flv $video
	mplayer $* /tmp/youtube.flv
} else {
	mplayer $* $(youtube-dl -gb $video)
}
